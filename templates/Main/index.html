<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/feed.css">
    <title>OsloStudent</title>
</head>

<body>

    {% include "navbar.html" %}
    <div class="feed-container">

        <div class="create-post">
            <form action="/post" method="POST">
                <textarea name="content" placeholder="Hva tenker du p√•, {{ session.email }}?" required></textarea>
                <button type="submit" class="btn">Publiser</button>
            </form>
        </div>

        {% for post in posts %}
        <div class="post">

            <div class="post-header">
                <img src="/static/uploads/{{ post.profile_pic }}" class="pfp">
                <div>
                    <strong>{{ post.first_name }} {{ post.last_name }}</strong><br>
                    <small>{{ post.created_at }}</small>
                </div>
            </div>

            <p class="post-content">{{ post.content }}</p>

            <div class="post-actions">
                <a href="/like/{{ post.id }}" class="like-btn">üëç {{ post.like_count }}</a>
                <span>üí¨ {{ post.comment_count }}</span>
            </div>

            <div class="comments">
                {% set post_id = post.id %}

                {% for c in post.comments %}
                <div class="comment">
                    <strong>{{ c.first_name }} {{ c.last_name }}:</strong> {{ c.content }}
                </div>
                {% endfor %}
            </div>

            <form action="/comment/{{ post.id }}" method="POST" class="comment-form">
                <input type="text" name="comment" placeholder="Skriv en kommentar..." required>
                <button>Send</button>
            </form>

        </div>
        {% endfor %}

    </div>

</body>

</html>